<div class="ngx-dhis2-org-unit-tree-item">
  <!-- org unit title area -->
  <div class="ngx-dhis2-org-unit-tree-item-title">
    <button
      class="ngx-dhis2-org-unit-tree-item-toggle-btn"
      (click)="onToggleOrgUnitChildren($event)"
      *ngIf="(orgUnit$ | async)?.children.length > 0"
    >
      <img [src]="expanded ? minusCircleIcon : plusCircleIcon" alt="" />
    </button>
    <div *ngIf="(orgUnit$ | async)?.children.length === 0">&nbsp;</div>
    <div
      [ngClass]="{
        'ngx-dhis2-org-unit-tree-item-name': true,
        'bg-primary text-white': selected
      }"
      (click)="onToggleOrgUnit($event)"
    >
      <div>{{ (orgUnit$ | async)?.name }}</div>
      &nbsp;
      <div
        class="badge {{ selected ? 'badge-light' : 'badge-secondary' }}"
        *ngIf="(selectedChildrenCount$ | async) > 0"
      >
        {{ selectedChildrenCount$ | async }}
      </div>
    </div>
  </div>
  <!-- end of org unit title area -->

  <!-- org unit children area -->
  <div
    [style.margin-left]="parentOrgUnit ? '23px' : '11px'"
    *ngIf="(orgUnit$ | async)?.children.length > 0 && expanded"
  >
    <div
      class="ngx-dhis2-org-unit-tree-item-child-item"
      *ngFor="
        let orgUnitChildId of (orgUnit$ | async).children;
        trackBy: trackByFn
      "
    >
      <ngx-dhis2-org-unit-tree-item
        [orgUnitId]="orgUnitChildId"
        (activate)="onActivateOu($event)"
        (deactivate)="onDeactivateOu($event)"
        [selectedOrgUnits]="selectedOrgUnits"
        [parentOrgUnit]="orgUnit$ | async"
      ></ngx-dhis2-org-unit-tree-item>
    </div>
  </div>
  <!-- end of org unit children area -->
</div>
