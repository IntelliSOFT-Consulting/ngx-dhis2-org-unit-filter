<div class="ngx-dhis2-org-unit-tree-item">
  <!-- org unit title area -->
  <div class="ngx-dhis2-org-unit-tree-item-title">
    <button
      class="ngx-dhis2-org-unit-tree-item-toggle-btn"
      (click)="onToggleOrgUnitChildren($event)"
      *ngIf="(orgUnit$ | async)?.children.length > 0"
    >
      <i class="fa {{ expanded ? 'fa-caret-down' : 'fa-caret-right' }}"></i>
    </button>
    <mat-checkbox
      [ngClass]="{
        'ml-3': (orgUnit$ | async)?.children.length === 0,
        'ngx-dhis2-org-unit-tree-item-name': true
      }"
      (click)="onToggleOrgUnit($event)"
    >
      {{ (orgUnit$ | async)?.name }}
      <div
        class="badge badge-secondary"
        *ngIf="(selectedChildrenCount$ | async) > 0"
      >
        {{ selectedChildrenCount$ | async }}
      </div>
    </mat-checkbox>
  </div>
  <!-- end of org unit title area -->

  <!-- org unit children area -->
  <div
    [style.margin-left]="'25px'"
    *ngIf="(orgUnit$ | async)?.children.length > 0 && expanded"
  >
    <div
      class="ngx-dhis2-org-unit-tree-item-child-item"
      *ngFor="
        let orgUnitChildId of (orgUnit$ | async).children;
        trackBy: trackByFn
      "
    >
      <ngx-dhis2-org-unit-tree-item
        [orgUnitId]="orgUnitChildId"
        (activate)="onActivateOu($event)"
        (deactivate)="onDeactivateOu($event)"
        [selectedOrgUnits]="selectedOrgUnits"
        [parentOrgUnit]="orgUnit$ | async"
      ></ngx-dhis2-org-unit-tree-item>
    </div>
  </div>
  <!-- end of org unit children area -->
</div>
